# Structured Outputs with Vercel AI SDK

The **Structured Outputs** example demonstrates how to use the Vercel AI SDK to generate structured data, such as travel itineraries, using schemas.

## Prerequisites

1. Ensure the Vercel AI SDK is installed in your project. Refer to [Next.js Getting Started](https://sdk.vercel.ai/docs/getting-started/nextjs-app-router).

2. Set up the necessary API keys and environment variables for the Vercel AI SDK. Check the [Providers documentation](https://sdk.vercel.ai/docs/foundations/providers-and-models) for details.

3. Define a schema for the structured output. For example, in this case, we use an `itinerarySchema` to validate and structure the travel itinerary data.

## Explanation

This example uses the `streamObject` function to process user input and generate structured outputs based on a predefined schema. The schema ensures that the AI-generated data adheres to a specific format, making it easier to work with structured data in your application.

## Code Example

### API Route

The following API route handles requests to generate structured outputs. It uses the `streamObject` function with the `itinerarySchema` to validate and structure the AI-generated data.

```typescript
import { google } from "@ai-sdk/google";
import { streamObject } from "ai";
import { itinerarySchema } from "./schema";

export async function POST(req: Request) {
  const prompt = await req.json();

  const result = streamObject({
    model: google("gemini-2.0-flash-001"),
    schema: itinerarySchema,
    system:
      "You are an expert travel planner with knowledge of destinations worldwide. Create detailed, realistic itineraries.",
    prompt
  });

  return result.toTextStreamResponse();
}
```

## Frontend Integration

The `ChatStructuredOutputs` component demonstrates how to integrate structured outputs into a Next.js application. It uses the `useObject` hook from the Vercel AI SDK to handle API requests and display the structured data.

```tsx
"use client";

import { experimental_useObject as useObject } from "@ai-sdk/react";
import { itinerarySchema } from "@/app/api/chat/structured-outputs/schema";
import { Button, Card, Input } from "@/components/ui";
import { useState, FormEvent } from "react";

export function ChatStructuredOutputs() {
  const [input, setInput] = useState<string>("");
  const { submit, isLoading, object, stop, error } = useObject({
    api: "/api/chat/structured-outputs",
    schema: itinerarySchema,
  });

  const handleSubmit = (e: FormEvent) => {
    e.preventDefault();
    submit(input);
    setInput("");
  };

  return (
    <Card className="p-4">
      <form onSubmit={handleSubmit} className="flex gap-2 mb-4">
        <Input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          placeholder="Ask for a travel itinerary..."
          className="flex-1"
        />
        <Button type="submit" disabled={isLoading}>
          {isLoading ? "Loading..." : "Submit"}
        </Button>
      </form>

      {error && <p className="text-red-500">Error: {error.message}</p>}

      {object && (
        <div className="mt-4">
          <h3 className="text-lg font-bold">Generated Itinerary:</h3>
          <pre className="bg-gray-900 text-purple-300 p-4 rounded">
            {JSON.stringify(object, null, 2)}
          </pre>
        </div>
      )}
    </Card>
  );
}
```

## Use Case

This example is ideal for applications that require structured data, such as:

- Travel planning
- E-commerce product recommendations
- Formatted reports or summaries

By using schemas, you can ensure that the AI-generated data is consistent and reliable, making it easier to integrate into your application.

## Quick Links

- [Vercel AI SDK Documentation](https://sdk.vercel.ai/docs)
- [Providers and Models](https://sdk.vercel.ai/docs/foundations/providers-and-models)
- [StreamObject schemas](https://sdk.vercel.ai/cookbook/next/stream-object#schema-1)